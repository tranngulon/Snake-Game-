<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            height: 100vh;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #app {
            position: relative;
            width: 100%;
            height: 100%;
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
        }

        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10;
        }

        .center-btn {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3rem;
            border-radius: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(255, 75, 43, 0.4);
            transition: all 0.3s;
        }

        .center-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 75, 43, 0.6);
        }

        .center-btn i {
            font-size: 1.5rem;
        }

        #fileInput {
            display: none;
        }

        /* Nút play/pause lớn giữa màn hình */
        .play-pause-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 2.5rem;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 5;
            transition: all 0.3s;
            opacity: 1;
        }

        .play-pause-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .play-pause-btn.show {
            display: flex;
        }

        .play-pause-btn.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Nút xoay màn hình */
        .rotate-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 5;
            transition: all 0.3s;
            opacity: 1;
        }

        .rotate-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: rotate(15deg) scale(1.1);
        }

        .rotate-btn.show {
            display: flex;
        }

        .rotate-btn.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Nút toàn màn hình */
        .fullscreen-btn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 5;
            transition: all 0.3s;
            opacity: 1;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.1);
        }

        .fullscreen-btn.show {
            display: flex;
        }

        .fullscreen-btn.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Thông tin video */
        #info {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            backdrop-filter: blur(5px);
            opacity: 1;
            transition: opacity 0.5s;
        }

        #info.hidden {
            opacity: 0;
        }

        #title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .time {
            font-size: 0.9rem;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div id="app">
        <video id="video"></video>
        
        <div id="overlay">
            <button id="selectBtn" class="center-btn">
                <i class="fas fa-folder-open"></i> CHỌN VIDEO
            </button>
            <input type="file" id="fileInput" accept="video/*" multiple>
        </div>
        
        <div id="playPauseBtn" class="play-pause-btn">
            <i class="fas fa-play"></i>
        </div>
        
        <div id="rotateBtn" class="rotate-btn">
            <i class="fas fa-sync-alt"></i>
        </div>
        
        <div id="fullscreenBtn" class="fullscreen-btn">
            <i class="fas fa-expand"></i>
        </div>
        
        <div id="info">
            <div id="title">Chưa có video</div>
            <div class="time">
                <span id="current">00:00</span> / <span id="total">00:00</span>
            </div>
        </div>
    </div>

    <script>
        class VideoPlayer {
            constructor() {
                this.video = document.getElementById('video');
                this.fileInput = document.getElementById('fileInput');
                this.selectBtn = document.getElementById('selectBtn');
                this.overlay = document.getElementById('overlay');
                this.playPauseBtn = document.getElementById('playPauseBtn');
                this.rotateBtn = document.getElementById('rotateBtn');
                this.fullscreenBtn = document.getElementById('fullscreenBtn');
                this.info = document.getElementById('info');
                this.title = document.getElementById('title');
                
                this.rotation = 0;
                this.isPlaying = false;
                this.hideTimer = null;
                
                this.init();
            }
            
            init() {
                this.selectBtn.addEventListener('click', () => this.fileInput.click());
                this.fileInput.addEventListener('change', (e) => this.handleFiles(e));
                
                this.playPauseBtn.addEventListener('click', () => {
                    this.togglePlay();
                    this.showControls();
                });
                
                this.rotateBtn.addEventListener('click', () => {
                    this.rotate();
                    this.showControls();
                });
                
                this.fullscreenBtn.addEventListener('click', () => {
                    this.toggleFullscreen();
                    this.showControls();
                });
                
                this.video.addEventListener('click', () => {
                    this.togglePlay();
                    this.showControls();
                });
                
                this.video.addEventListener('dblclick', () => {
                    this.toggleFullscreen();
                    this.showControls();
                });
                
                this.video.addEventListener('timeupdate', () => this.updateTime());
                this.video.addEventListener('loadedmetadata', () => this.updateDuration());
                
                this.video.addEventListener('play', () => {
                    this.isPlaying = true;
                    this.overlay.style.display = 'none';
                    this.updatePlayPauseIcon();
                    this.showControls();
                });
                
                this.video.addEventListener('pause', () => {
                    this.isPlaying = false;
                    this.updatePlayPauseIcon();
                    this.showControls();
                });
                
                document.addEventListener('keydown', (e) => {
                    this.handleKeydown(e);
                    this.showControls();
                });
                
                document.addEventListener('fullscreenchange', () => this.updateFullscreenIcon());
                
                document.addEventListener('mousemove', () => this.showControls());
                document.addEventListener('touchstart', () => this.showControls());
                
                this.hideControls();
            }
            
            handleFiles(e) {
                for (let file of e.target.files) {
                    if (file.type.startsWith('video/')) {
                        const url = URL.createObjectURL(file);
                        this.video.src = url;
                        this.title.textContent = file.name;
                        
                        this.showAllControls();
                        this.showControls();
                        
                        this.video.play();
                        break;
                    }
                }
                this.fileInput.value = '';
            }
            
            showAllControls() {
                this.playPauseBtn.classList.add('show');
                this.rotateBtn.classList.add('show');
                this.fullscreenBtn.classList.add('show');
            }
            
            togglePlay() {
                if (this.video.src) {
                    if (this.isPlaying) {
                        this.video.pause();
                    } else {
                        this.video.play();
                    }
                } else {
                    this.fileInput.click();
                }
            }
            
            updatePlayPauseIcon() {
                const icon = this.playPauseBtn.querySelector('i');
                if (this.isPlaying) {
                    icon.className = 'fas fa-pause';
                } else {
                    icon.className = 'fas fa-play';
                }
            }
            
            rotate() {
                this.rotation = (this.rotation + 90) % 360;
                this.video.style.transform = `rotate(${this.rotation}deg)`;
                this.rotateBtn.style.transform = `rotate(${this.rotation}deg)`;
            }
            
            toggleFullscreen() {
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen();
                } else {
                    document.exitFullscreen();
                }
            }
            
            updateFullscreenIcon() {
                const icon = this.fullscreenBtn.querySelector('i');
                if (document.fullscreenElement) {
                    icon.className = 'fas fa-compress';
                } else {
                    icon.className = 'fas fa-expand';
                }
            }
            
            updateTime() {
                const current = document.getElementById('current');
                if (this.video.duration) {
                    current.textContent = this.formatTime(this.video.currentTime);
                }
            }
            
            updateDuration() {
                const total = document.getElementById('total');
                total.textContent = this.formatTime(this.video.duration);
            }
            
            showControls() {
                if (!this.video.src) return;
                
                this.playPauseBtn.classList.remove('hidden');
                this.rotateBtn.classList.remove('hidden');
                this.fullscreenBtn.classList.remove('hidden');
                this.info.classList.remove('hidden');
                
                clearTimeout(this.hideTimer);
                
                this.hideTimer = setTimeout(() => {
                    this.hideControls();
                }, 3000);
            }
            
            hideControls() {
                if (!this.video.src || !this.isPlaying) return;
                
                this.playPauseBtn.classList.add('hidden');
                this.rotateBtn.classList.add('hidden');
                this.fullscreenBtn.classList.add('hidden');
                this.info.classList.add('hidden');
            }
            
            handleKeydown(e) {
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        this.togglePlay();
                        break;
                    case 'f':
                    case 'F':
                        e.preventDefault();
                        this.toggleFullscreen();
                        break;
                    case 'r':
                    case 'R':
                        e.preventDefault();
                        this.rotate();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        this.video.currentTime = Math.max(0, this.video.currentTime - 10);
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        this.video.currentTime = Math.min(this.video.duration, this.video.currentTime + 10);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.video.volume = Math.min(1, this.video.volume + 0.1);
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        this.video.volume = Math.max(0, this.video.volume - 0.1);
                        break;
                    case 'Escape':
                        if (document.fullscreenElement) {
                            document.exitFullscreen();
                        }
                        break;
                }
            }
            
            formatTime(seconds) {
                if (isNaN(seconds)) return '00:00';
                const m = Math.floor(seconds / 60);
                const s = Math.floor(seconds % 60);
                return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new VideoPlayer();
        });
    </script>
</body>
</html>
